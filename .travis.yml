language: java
jdk: openjdk8
services:
- docker
branches:
  except:
  - "/^[0-9]/"
before_script:
- git config --global user.name "${GIT_USER_NAME}"
- git config --global user.email "${GIT_USER_EMAIL}"
- cp .travis.settings.xml $HOME/.m2/settings.xml
stages:
- name: devbuild
  if: branch != master
- name: masterdeploy
  if: branch = master
jobs:
  include:
  - stage: devbuild
    name: Development Build
    script: mvn clean install jib:dockerBuild -Drevision=${TRAVIS_BUILD_NUMBER}.$(git
      rev-parse --short HEAD)
  - stage: masterdeploy
    name: build master, site and deploy
    script:
    - mvn clean install jib:dockerBuild scm:tag deploy site -Drevision=${TRAVIS_BUILD_NUMBER}.$(git
      rev-parse --short HEAD) -Dusername="${GIT_USER_NAME}" -Dpassword="${GITPW}"
    - echo "${DOCKER_PASSWORD}" | docker login -u "${DOCKER_USERNAME}" --password-stdin
      && docker images && docker push game-of-mates/schema
env:
  global:
  - secure: dGdwEWQncfAOkreua6mgtrz6G8w+PHaaWZrK5arBEK+IVqGQfiYtXT3sYWHwjHG5nOV4TsT1D1g9mI7L0EkwGUDCoH0IEhVyxt87yDNSOKbLeBE+GQfG8mFm0/eio/wbaZJIA2iIeAuVXL9q31UrveRuVXg8lhusR3caV6pM5QNnxUasL2Q0XSLBpwxON2KqbWLai7zzaAjXnd3ne5ZHQpqFjXgC41jvm7HJpt0Lz3fq5pZNEHsqYWosmon0SqDObDwRtafiRz9F6R446J7l1vkcn57YYH4KWBCnLIsvqNkweq5bSkda8ROLkMS1jr2s/el1SvzXmg8GhQt/30r6nBwPE82h9ysSa+IIFuijKp8gY8Sf+bZEssGPVYo5HNpESsgbIwRW9RT8xXpdPbPH/xW984554/0p9vkNpDDdW3n9atcA8cbYcZjNhcYzX1srGYJgMfWMOs74QbeDF75ea+dPOTh9wuImaxPRZ155G3hs0Y7UYct+CoH3SKSbf0Ry1Kkf3BkLs+eEx6ZkUlGzoWrGgFFXnROPY4vrqM1C3mtyAMUhnC6a27uTuoipAvGaOvdqVMg/dPzGyleQIiMPxDKyUb2BkyJKWpU1V0lzCVRdSLn8LVQtncSPadixQfbjrqBF7O5UxP1z+vXYKjIe/S+1pHg/5J7QUtaC8Q2pV6s=
  - secure: HUHCoxqfYzQer4MsdpIxJSZm3wZkwTZhg5kfqgLTdU7oH6eJw0qeLMLPpgzOBuAcf5DjP624l64bjr2/IXKFOeZDXoqCEpYnTw6Z5WOjCVZaihnFWuUqaJANSsosJ708vUsJQl6GwvuXKb9tJvUwfduU05GI1+cd3ryBRCl4ikSMKEdyM8HEJqEfBUVOI5AhdATU19Fn6PSqDcbcvyYglG+Im7+tNjAMV4RhaTP8FLJrjc3cA7Xy3oBK6Ma+DMt37K2wLqHu5vmW/FprXRVJdeXjiaz9+msjUtoodCJu90sDvvpfPXBsD7VbQjDRczIM3MUYj4qAKxP/L8nJfycqfiVcOVJ9UauXz/DOgJjfR4pL3qiBBkj5+sydX36AMyRc5hxXxlMWCbg+A7gJQ/QPJT+HDqqzey/bAwzBuqJ9KwD1A8N7kUqDRmqQQCuptpnoEPvt/EXbx1BdqfdRqYLSA01JemLp+M2ZKfVy02U+S4G77W/kTSzLRrXY0bG6e6rXizRXpT8V0Q2DrNfdogwrquLX4sYFch6fYbDIS/HxwHNqakxnTh9QnX13U1VvVnMB8Ky9hnKpqaJeQESxavmvn7XKSnQMq/Uj3Q1qEFF4uqXHhVGiVHaBSOJOS+y6gIyfaBJxyv+cJQhSrOFuMsOsHqZUdaGxTc237pjFDVyCiI4=
  - secure: NG4E8mVI4Ui0HoR81Di9EVlOGEHSxpMEXzwB9atWCoEWK/ZAJQEaES8qkQWog15Rj4mlsDKg0ARUvMCUl6fEzoEPJScol+uiC9JPa03FA7pMGikRp3njHA4pDUu0OmjEEJWtAzTqwOrsKJ7rGct6o0XKfs5ix6U6CmsA1a17fb5nqtSK2z695knXYr203MvVR4SPxWE1Q/OpIcx4ZPyaPXUswlvQOhzZXdm84malSqs0xgOzXjeUgPI2qlJo6emPebaf5VqoWXx9du2RyEhzbDWm6iCtCZsRDo9s+mP8jANm/yfa2gciv905NcrthEsRvTGIkHcKhCI4+OyLYPWsx8RrJQxFPNFuRdXBkMjNe4+CwKQFCczFoP82D7Gmo6EoK0LBd/93+/tVpwGGvrHoK63E4IZU0EweW2mIU1v2xOPE8U8BrjJMGC+YXUvnGo80wPErEHh+o8aQeTuh+xK37eFlgYYDi/FXLSTigNzZ6sRKdLsk+s/ODTuz85W8vwEdV7O3KWAjKcf2/snf2JKE80/rHYwDv6wqU8YB6Ae6Vh9MbGWdyA4R27RBkzETjs/15EjnAWf6hYofgoUMaUuq25ugj1OGhJBVK9GXFHo9oPhjMoK4+C7Ad/beOAHL7DqBg01bao9INhIRnjS8PMzgB2KcpxTWOw+shqQWbiMsNmg=
  - secure: tX651ZC99i3VEOcUv8LOQZspsTVSQue4qUYP3QlL0Eb0JS4Vdo26F2uhzCUf4CgxEsw9m6eQXUzoUyOvcBEOibgbCp6kTE+HkN1avnlEfDNczB5eStpyPmkBwEm22U0kao/mb2BuFlsXK0jgFJXCEvr2XpdLG5eKqFXPwCveptpiNylxcxO0G3wF7nNiYaPtpCXsmG3NDQpP09wwHX9bMWuzAhiyR5PTRQUcbrFV+qeTFJiWX9i3067IAhxTnB14PBYeDZOYzRAmGgWoBA2atxXWWX9V2qW78ZWVku2xSFU/VPi9KUO1Sa9QqhMVzboklRRZjrEpTydSvDtjIbLhVL9+MKNe68MyxjfJGbjDk2Z4ZmaRkQmQRKKT8vJNP9XcNCaSdtoDdn2V/xd/yizX1hnIxIYKkn+XsFl9gcZeZru7xmBZwJyO8lx9yveWl67a2PO7mS+GgcwBH1sdAcqowK454Fmv+vK7pmvQgv1EzUkMqdJjJ3umcRrTtsohwO13R4fubAZgNKR5OaiEXrCLizjpYGvv0Rtqa/bKSvyuQKQDWGqrXwQq83zAQl8a3Jl+8thhtiVFArhUL9tG252WM+PJQRHK/EarHQg0LyFNFCcDq0tRCUBYkEwc1gsEERuypvbdkrGgKRX3pTFZuQ0XsIUaO2dt0UdCe4TWV6xCyi8=
  - secure: XPkINLq9sPgovDmQpcyf72iuYNPAOWSsJFTvuCUsgh/yS/9jhLtmnrth/nqgSO4tKfS3jqCmAi6MOKfNw+d6mADlxUi1ReaDlUEhw8mJk5BxihrlZIaWwafbduKEm9BtobhhAoV4YP7hyJZgg8NMb3moOVrnNracvVUfQuGQ75Lsdshy1NAGGPPZTHEmAYuXvgeLtLl+iRAfXYCCXXAYY5x286bJzWBq5quoSSiI1whP9mysEenIcx+Y45a+6JQysHRdfKTdP8SOsJ9rp44e08JN8Uv1UwSDeEUOB+iDxEVDagns8ond0Z2SRRNbTyXLn9cSkWR040wNpTBJeaL+rXJ1orK2e0JouX3mkLOK3Y6F+EwhrzvpxlvVzOCBVr0QlJ6VkI3OF+DubtYhgQNjFC49eYhjg1OKZFKNIqxmvm1Tlj8I0GssSetFk3pLM6LWDFF7K8owd0RcXQoeQ1twT514P9H//gAPef9diQinLABtgmOYj5imWpEGPK8/nYmeBJ0hqG+CPt9alUlNbpvHTXBife7LYkTxiCDNwxBWM/pLR5zxEylkDyBanrDOH5Ha0fD1UTSaOteGOFACKc3tPCEwzdb6sBiPvWOC301CmIdWk8CSufSQtynT7D2a815pwnQcTUyPZJwNqwmPyteYu2adPB2NrFD0igIB2Aifa/4=
  - secure: sQi1hPs313oMU/CMhID+dEE2MjfsBPgdWeK5CeIvSMnFn+HNVaRVyoIq0G2UwNGE/Mia2TBKp7mB8woKbQ02OpKeWos4pZeeHdc6Mx76gt5nmwzTXjPQxXwvmCfl3vYpvF6LjeGP0iAsL0OC6KFDtkQ5huObmyWmzZBYXpiwpiWpr+TfVQlnDP4lqE/J0HEpJNHpuLTM7i0C4osDtENcXvr18tFahfr3gjdYvj3HmGyCmHHL/XyRpceS/maBgnd6pzmfIQkX7AdCE0tDegKRSyQQ8HJT0FLEjbbFfmbb21vNl3LTPn/13soXg160PpH+KqwNZTzxN+ZnHzaeJbzmIndNQm35f/QhLRgPYdv2v+CgOCyNWiEbdykRGqyKfqfZoa1uSoPNUvvLPiVCJCVHfFOLSWW8WRTpe5sndsiH06J0kBgdP/xaCiD6cjPW/5afKvWS87dizNtE4x8EN25T4Zh8hCiIdvTOuR/EMBDowQTqLcBqbqwiXFpp+tp6aAZDSfr0ZF8AqaN0eyXhy0yFxG/9hfJGdl0E36WkScb9AQm8ege9qhXEhgFmlSgBjXzaleBAldSdRVjq5uRpJL2Q5pJUP6EdtK+mM6nJW30YTUs06GWxa3EQE3yJXYrOfTiRsvDM7+kSOMkSYMtscdvylx3PXtLJSluCxUH41MXWpDE=
